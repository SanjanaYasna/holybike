<!doctype html>
<!-- rentals/index.html.erb -->
<html lang="en">
  <!---
  Renders navbar from shared/navbar + 
  contains map display and will interact with API backend in app/javascript/map_api -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
  
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }

    footer {
      position: sticky;
      bottom: 0;
      width: 100%;
    }
  </style>
</head>
<body style="background-color: white">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>
<%= render 'shared/navbar' %>

<body>
    <!-- This is for testing, delete later -->
<div class="page-section flexbox vertical stretch">
    <div class="section-inner flexbox vertical stretch" style="padding-left:10px;">
        <div class="section-title flexbox horizontal center">
           <h1> This is rentals/index.html.erb</h1>    
        </div>
        <div class="flexbox vertical stretch" style="padding-left:20px;">
            <% if @rentals.present? %>
                <div class="record-row header flexbox horizontal justify-space-between">
                        <p>This user has made <%=@rentals.count%> bike rentals</p>
                </div>
                    
                  <% @rentals.each do |rental| %>
                    <br/>
                    <p> Rental <%=rental.id%> cost $<%=rental.cost/100%></p>
                    <p> Rental belongs_to this ride: <%=rental.ride%></p>
                    <p> <%=rental.ride.attributes%></p>
                    <p> This ride took <%=((rental.ride.end_time - rental.ride.start_time)/ 60).to_i %> minutes</p>
                    <br/>
                  <%end%>
                <%#= render(partial: "rentals/row", collection: @rentals, as: :rental) %>
            <% else %>
            <div class="empty">
                No rentals found.
            </div>
            <% end %>
        </div>
    </div>
</div>
</body>
<footer>
 <%= render 'shared/footer' %>
</footer>

